### NFL-BA: Improving Endoscopic SLAM with Near-Field Light Bundle Adjustment

Simultaneous Localization And Mapping (SLAM) from a monocular endoscopy video can enable autonomous navigation, guidance to unsurveyed regions, and 3D visualizations, which can significantly improve endoscopy experience for surgeons and patient outcomes. Existing dense SLAM algorithms often assume distant and static lighting and textured surfaces, and alternate between optimizing scene geometry and camera parameters by minimizing a photometric rendering loss, often called Photometric Bundle Adjustment. However, endoscopic environments exhibit dynamic near-field lighting due to the co-located light and camera moving extremely close to the surface, textureless surfaces, and strong specular reflections due to mucus layers. When not considered, these near-field lighting effects can cause significant performance reductions for existing SLAM algorithms from indoor/outdoor scenes when applied to endoscopy videos. To mitigate this problem, we introduce a new Near-Field Lighting Bundle Adjustment Loss (LNFL−BA) that can also be alternatingly optimized, along with the Photometric Bundle Adjustment loss, such that the captured images' intensity variations match the relative distance and orientation between the surface and the co-located light and camera. We derive a general NFL-BA loss function for 3D Gaussian surface representations and demonstrate that adding LNFL−BA can significantly improve the tracking and mapping performance of two state-of-the-art 3DGS-SLAM systems, MonoGS (35% improvement in tracking, 48% improvement in mapping with predicted depth maps) and EndoGSLAM (22% improvement in tracking, marginal improvement in mapping with predicted depths), on the C3VD endoscopy dataset for colons.

从单目内窥镜视频实现同步定位与建图（SLAM）可以实现自主导航、引导未探测区域以及3D可视化，这将显著改善外科医生的内窥镜操作体验并提高患者的治疗效果。现有的密集SLAM算法通常假设远距离的静态光照和纹理化表面，并通过最小化一种称为光度渲染损失（Photometric Bundle Adjustment）的光度误差，在场景几何和相机参数的优化之间交替进行。然而，在内窥镜环境中，由于光源和相机位置靠近且随运动而动态变化，表面通常缺乏纹理，同时由于粘液层的存在会产生强烈的镜面反射，这些近场光照效应会对传统针对室内/室外场景的SLAM算法在内窥镜视频中的性能造成显著影响。为了解决这一问题，我们提出了一种新的近场光照联合调整损失（LNFL−BA），可与光度联合调整损失（Photometric Bundle Adjustment）交替优化，使捕获图像的强度变化能够匹配表面与近场光源及相机之间的相对距离和方向关系。我们推导了一个通用的适用于3D高斯表面表示的NFL-BA损失函数，并证明在两种先进的3DGS-SLAM系统（MonoGS和EndoGSLAM）中添加LNFL−BA可以显著提升追踪和建图性能，分别在C3VD内窥镜结肠数据集上的追踪性能提升35%和22%，建图性能在基于预测深度图的情况下分别提升48%和略有提升。这些结果表明，考虑近场光照效应的损失函数能够有效增强SLAM系统在内窥镜复杂环境中的鲁棒性和准确性。
